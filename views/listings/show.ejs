<% layout("/layouts/boilerplate") %>
<body>
    <h3>Listing Details:</h3>
    
    <!-- Fix: Check if stuffData exists (not stuffData.length) -->
    <% if(stuffData) { %>
        <ul>
            <li><strong>Title:</strong> <%=stuffData.title%></li>
            <li><strong>Description:</strong> <%=stuffData.description%></li>
            <li><strong>Price:</strong> &#8377;<%=stuffData.price.toLocaleString("en-IN")%></li>
            <li><strong>Location:</strong> <%=stuffData.location%></li>
            <li><strong>Country:</strong> <%=stuffData.country%></li>
        </ul>
        
        <br>
        <a href="/listings/<%=stuffData._id%>/edit">Edit this listing</a>
        <br><br>
        
        <form method="post" action="/listings/<%=stuffData._id%>?_method=DELETE">
            <button type="submit">Delete this listing</button>
        </form>
        
        <br><br>
        <a href="/listings">← Back to all listings</a>
        
    <% } else { %>
        <p>Listing not found!</p>
        <a href="/listings">← Back to all listings</a>
    <% } %>
</body>
